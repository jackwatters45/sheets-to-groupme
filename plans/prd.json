[
  {
    "id": "groupme-001",
    "category": "refactor",
    "description": "Export GroupMember type and add member matching to GroupMeService",
    "passes": true,
    "steps": [
      "Export GroupMember class from groupme/client.ts",
      "Add isContactInGroup method to GroupMeService that takes a contact and member list",
      "Handle case-insensitive email comparison",
      "Handle phone normalization (strip non-digits for comparison)"
    ]
  },
  {
    "id": "schema-001",
    "category": "refactor",
    "description": "Simplify SyncResultDetail and SyncResultFailedRow schemas",
    "passes": true,
    "steps": [
      "Remove rowId from SyncResultDetail (no longer needed)",
      "Remove rowId from SyncResultFailedRow (no longer needed)",
      "Update sync.ts to not generate/use rowId"
    ]
  },
  {
    "id": "sync-001",
    "category": "refactor",
    "description": "Refactor SyncService to fetch live GroupMe members instead of file state",
    "passes": true,
    "steps": [
      "Call groupMeService.getMembers() at start of sync",
      "Use isContactInGroup to check if contact already exists",
      "Remove StateService dependency",
      "Remove state loading/saving calls",
      "Simplify ProcessingContext (remove state field)"
    ]
  },
  {
    "id": "cleanup-001",
    "category": "cleanup",
    "description": "Remove state module entirely",
    "passes": true,
    "steps": [
      "Delete src/state/store.ts",
      "Delete src/state/store.test.ts",
      "Verify no other files import from state/"
    ]
  },
  {
    "id": "cleanup-002",
    "category": "cleanup",
    "description": "Remove volume mount from fly.toml and data dir from Dockerfile",
    "passes": true,
    "steps": [
      "Remove [[mounts]] section from fly.toml",
      "Remove [[statics]] section from fly.toml",
      "Remove mkdir /app/data line from Dockerfile"
    ]
  },
  {
    "id": "test-001",
    "category": "test",
    "description": "Update sync.test.ts for new architecture",
    "passes": true,
    "steps": [
      "Remove StateService mocks",
      "Add mock for getMembers returning existing members",
      "Test that existing members are skipped by email match",
      "Test that existing members are skipped by phone match",
      "Test that new members are added",
      "Update assertions to not expect rowId"
    ]
  },
  {
    "id": "test-002",
    "category": "test",
    "description": "Verify CI passes with all changes",
    "passes": true,
    "steps": ["Run bun run typecheck", "Run bun run check", "Run bun run test"]
  },
  {
    "id": "groupme-002",
    "category": "refactor",
    "description": "Add nickname matching to isContactInGroup",
    "passes": true,
    "steps": [
      "Update isContactInGroup to also match by nickname/name",
      "Handle case-insensitive name comparison",
      "Add test for name matching in sync.test.ts"
    ]
  }
]
